<!-- Tabela (mostra quando há dados) -->
<section class="ov-tablewrap" *ngIf="data?.length; else emptyState">
  <table class="ov-table" role="table" aria-label="Resources table">
    <thead>
      <tr>
        <th *ngFor="let col of columns"
            ovResizableCol
            [tableId]="tableId"
            [columnKey]="col.key"
            [min]="col.minWidth ?? defaultColumnMin"
            [max]="col.maxWidth ?? 700"
            (click)="sort.emit(col.key)"
            [class.sortable]="true">
          {{ col.label }}
          <span *ngIf="sortColumn === col.key" aria-hidden="true">
            {{ sortDirection === 'asc' ? '▲' : '▼' }}
          </span>
        </th>
        <th *ngIf="showActions"
            class="ov-cell--right ov-col--actions">Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let row of data">
        <td *ngFor="let col of columns">
          <ng-container [ngSwitch]="col.type || 'text'">
            <!-- Datas -->
            <span *ngSwitchCase="'date'">
              {{ formatDate(getCell(row, col.key)) }}
            </span>

            <!-- Status (usa pílulas do DS) -->
            <span *ngSwitchCase="'status'"
                  [ngClass]="getStatusClass(getCell(row, col.key))">
              {{ getCell(row, col.key) || 'N/A' }}
            </span>

            <!-- Default -->
            <span *ngSwitchDefault>
              {{ getCell(row, col.key) }}
            </span>
          </ng-container>
        </td>

        <!-- Ações -->
        <td *ngIf="showActions" class="ov-col--actions ov-cell--right">
          <div class="ov-actions">
            <button class="ov-btn ov-btn--primary"
                    (click)="viewDetails.emit(row)">
              View Details
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</section>

<!-- Vazio -->
<ng-template #emptyState>
  <div class="ov-empty">No data found.</div>
</ng-template>

<!-- Exportar -->
<div class="ov-export" *ngIf="data?.length">
  <button class="ov-btn" (click)="exportData.emit()">Export to CSV</button>
</div>
