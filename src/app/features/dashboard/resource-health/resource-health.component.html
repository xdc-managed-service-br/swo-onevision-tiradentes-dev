<!-- Wrapper em “cartão” usando tokens do Design System -->
<section class="rh-card">
  <header class="rh-head">
    <h3 class="rh-title">Resource Health</h3>
  </header>

  <!-- Loading -->
  <div *ngIf="loading" class="ov-loading">Loading resource health…</div>

  <!-- Grid de recursos -->
  <div *ngIf="!loading" class="rh-grid">
    <a
      *ngFor="let resource of resourceHealth"
      class="rh-item"
      [routerLink]="[resource.routeLink]"
      [attr.aria-label]="resource.displayName + ' details'">

      <div class="rh-item__head">
        <span class="rh-name">{{ resource.displayName }}</span>
        <span class="rh-badge">{{ resource.count.total }}</span>
      </div>

      <div class="rh-bars">
        <div class="rh-bar">
          <div
            class="rh-seg is-healthy"
            [style.width.%]="getSegmentWidth(resource.count.healthy, resource.count)">
            <span *ngIf="resource.count.healthy > 0" class="rh-seg__label">{{ resource.count.healthy }}</span>
          </div>
          <div
            class="rh-seg is-warning"
            [style.width.%]="getSegmentWidth(resource.count.warning, resource.count)">
            <span *ngIf="resource.count.warning > 0" class="rh-seg__label">{{ resource.count.warning }}</span>
          </div>
          <div
            class="rh-seg is-critical"
            [style.width.%]="getSegmentWidth(resource.count.critical, resource.count)">
            <span *ngIf="resource.count.critical > 0" class="rh-seg__label">{{ resource.count.critical }}</span>
          </div>
        </div>

        <div class="rh-status">
          <span [class]="getHealthClass(resource.healthPercentage)">
            {{ resource.healthPercentage }}% Healthy
          </span>
          <span *ngIf="resource.count.inactive && resource.count.inactive > 0" class="rh-inactive">
            ({{ resource.count.inactive }} stopped)
          </span>
        </div>

        <!-- Detalhes extras só para EC2 -->
        <div *ngIf="resource.type === 'EC2Instance' && resource.healthDetails" class="rh-details">
          <span class="rh-detail">System: {{ resource.healthDetails.systemChecks }}</span>
          <span class="rh-detail">Instance: {{ resource.healthDetails.instanceChecks }}</span>
          <span class="rh-detail">EBS: {{ resource.healthDetails.ebsChecks }}</span>
        </div>
      </div>
    </a>
  </div>
</section>