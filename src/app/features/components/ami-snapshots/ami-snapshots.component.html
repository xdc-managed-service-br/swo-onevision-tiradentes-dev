<!-- Exemplo de uso em AMI Snapshots Component -->
<!-- src/app/features/resources/ami-snapshots/ami-snapshots.component.html -->

<div class="resource-page">
  <!-- Fixed Header -->
  <div class="resource-header">
    <h1 class="resource-header__title">AMI Snapshots</h1>
    
    <!-- Filters Row -->
    <div class="resource-header__filters">
      <!-- Platform Filter -->
      <div class="resource-filter">
        <label for="platform-filter">Platform</label>
        <select 
          id="platform-filter" 
          [(ngModel)]="filters.platform"
          (change)="applyFilters()">
          <option value="">All Platforms</option>
          <option value="linux">Linux/Unix</option>
          <option value="windows">Windows</option>
          <option value="other">Other</option>
        </select>
      </div>
      
      <!-- Region Filter -->
      <div class="resource-filter">
        <label for="region-filter">Region</label>
        <select 
          id="region-filter"
          [(ngModel)]="filters.region"
          (change)="applyFilters()">
          <option value="">All Regions</option>
          <option value="us-east-1">US East (N. Virginia)</option>
          <option value="us-west-2">US West (Oregon)</option>
          <option value="eu-west-1">EU (Ireland)</option>
          <option value="ap-southeast-1">Asia Pacific (Singapore)</option>
        </select>
      </div>
      
      <!-- Account Filter -->
      <div class="resource-filter">
        <label for="account-filter">Account</label>
        <select 
          id="account-filter"
          [(ngModel)]="filters.account"
          (change)="applyFilters()">
          <option value="">All Accounts</option>
          <option *ngFor="let account of availableAccounts" [value]="account.id">
            {{ account.name }}
          </option>
        </select>
      </div>
    </div>
    
    <!-- Actions Row -->
    <div class="resource-header__actions">
      <!-- Search Box -->
      <div class="resource-search">
        <input 
          type="text"
          [(ngModel)]="searchTerm"
          (input)="onSearch()"
          placeholder="Search by Image ID, Name Tag, or AMI Name"
          aria-label="Search resources">
        <svg class="resource-search__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
      </div>
      
      <!-- Reset Filters Button -->
      <button 
        class="resource-reset-btn"
        (click)="resetFilters()"
        [disabled]="!hasActiveFilters()">
        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
        </svg>
        Reset Filters
      </button>
      
      <!-- Export Button (Optional) -->
      <button 
        class="resource-export-btn"
        (click)="exportData()"
        *ngIf="filteredResources.length > 0">
        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
        </svg>
        Export
      </button>
    </div>
  </div>
  
  <!-- Scrollable Content Area -->
  <div class="resource-content">
    <!-- Loading State -->
    <div *ngIf="loading" class="ov-loading">
      Loading AMI Snapshots...
    </div>
    
    <!-- Empty State -->
    <div *ngIf="!loading && filteredResources.length === 0" class="ov-empty">
      No AMI Snapshots found matching your filters.
    </div>
    
    <!-- Table (Desktop) -->
    <div class="ov-tablewrap" *ngIf="!loading && filteredResources.length > 0">
      <table class="ov-table">
        <thead>
          <tr>
            <th (click)="sortData('imageId')" class="sortable">
              Image ID
              <span *ngIf="sortColumn === 'imageId'">
                {{ sortDirection === 'asc' ? '▲' : '▼' }}
              </span>
            </th>
            <th (click)="sortData('nameTag')" class="sortable">
              Name Tag
              <span *ngIf="sortColumn === 'nameTag'">
                {{ sortDirection === 'asc' ? '▲' : '▼' }}
              </span>
            </th>
            <th (click)="sortData('amiName')" class="sortable">
              AMI Name
              <span *ngIf="sortColumn === 'amiName'">
                {{ sortDirection === 'asc' ? '▲' : '▼' }}
              </span>
            </th>
            <th (click)="sortData('platform')" class="sortable">
              Platform
              <span *ngIf="sortColumn === 'platform'">
                {{ sortDirection === 'asc' ? '▲' : '▼' }}
              </span>
            </th>
            <th (click)="sortData('region')" class="sortable">
              Region
              <span *ngIf="sortColumn === 'region'">
                {{ sortDirection === 'asc' ? '▲' : '▼' }}
              </span>
            </th>
            <th (click)="sortData('creationTime')" class="sortable">
              Creation Time
              <span *ngIf="sortColumn === 'creationTime'">
                {{ sortDirection === 'asc' ? '▲' : '▼' }}
              </span>
            </th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let resource of paginatedResources">
            <td>{{ resource.imageId }}</td>
            <td>{{ resource.nameTag || 'N/A' }}</td>
            <td>{{ resource.amiName }}</td>
            <td>
              <span [class]="getPlatformClass(resource.platform)">
                {{ resource.platform }}
              </span>
            </td>
            <td>{{ resource.region }}</td>
            <td>{{ formatDate(resource.creationTime) }}</td>
            <td>
              <button 
                class="ov-btn ov-btn--primary"
                (click)="viewDetails(resource)">
                View Details
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- Mobile Cards -->
    <div class="ov-cards" *ngIf="!loading && filteredResources.length > 0">
      <div class="ov-card" *ngFor="let resource of paginatedResources">
        <div class="ov-card__head">
          <div>
            <div class="ov-card__title">{{ resource.imageId }}</div>
            <div class="ov-card__sub">{{ resource.amiName }}</div>
          </div>
          <span [class]="getPlatformClass(resource.platform)">
            {{ resource.platform }}
          </span>
        </div>
        <div class="ov-card__grid">
          <div>
            <div class="ov-k">Name Tag</div>
            <div class="ov-v">{{ resource.nameTag || 'N/A' }}</div>
          </div>
          <div>
            <div class="ov-k">Region</div>
            <div class="ov-v">{{ resource.region }}</div>
          </div>
          <div>
            <div class="ov-k">Created</div>
            <div class="ov-v">{{ formatDate(resource.creationTime) }}</div>
          </div>
          <div class="full-width">
            <button 
              class="ov-btn ov-btn--primary"
              (click)="viewDetails(resource)"
              style="width: 100%">
              View Details
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Pagination -->
    <div class="ov-pagination" *ngIf="!loading && totalPages > 1">
      <div class="ov-pagination__info">
        Showing {{ startIndex + 1 }}-{{ endIndex }} of {{ filteredResources.length }} items
      </div>
      <div class="ov-pagination__controls">
        <button 
          (click)="previousPage()"
          [disabled]="currentPage === 1">
          Previous
        </button>
        <div class="ov-pagination__pages">
          <button 
            *ngFor="let page of getPageNumbers()"
            (click)="goToPage(page)"
            [class.is-active]="page === currentPage">
            {{ page }}
          </button>
        </div>
        <button 
          (click)="nextPage()"
          [disabled]="currentPage === totalPages">
          Next
        </button>
      </div>
    </div>
  </div>
</div>